typeof SDK=="undefined"&&(SDK={__namespace:!0});SDK.JQuery={cannotConnectMsg:"Can't connect to server",_context:function(){if(typeof GetGlobalContext!="undefined")return GetGlobalContext();if(Xrm&&Xrm.Utility&&typeof Xrm.Utility.getGlobalContext!="undefined")return Xrm.Utility.getGlobalContext();if(typeof Xrm!="undefined")return Xrm.Page.context;throw new Error("Context is not available.");},_getClientUrl:function(){return this._context().getClientUrl()},_ODataPath:function(){return this._getClientUrl()+"/XRMServices/2011/OrganizationData.svc/"},_errorHandler:function(n){return n.responseText==""?new Error("Error : "+n.status+": "+n.statusText+": "+this.cannotConnectMsg):new Error("Error : "+n.status+": "+n.statusText+": "+JSON.parse(n.responseText).error.message.value)},_dateReviver:function(n,t){var i;return typeof t=="string"&&(i=/Date\(([-+]?\d+)\)/.exec(t),i)?new Date(parseInt(t.replace("/Date(","").replace(")/",""),10)):t},_parameterCheck:function(n,t){if(typeof n=="undefined"||n===null)throw new Error(t);},_stringParameterCheck:function(n,t){if(typeof n!="string")throw new Error(t);},_callbackParameterCheck:function(n,t){if(typeof n!="function")throw new Error(t);},getOData:function(){this._ODataPath()},createRecord:function(n,t,i,r){this._parameterCheck(n,"SDK.JQuery.createRecord requires the object parameter.");this._stringParameterCheck(t,"SDK.JQuery.createRecord requires the type parameter is a string.");this._callbackParameterCheck(i,"SDK.JQuery.createRecord requires the successCallback is a function.");this._callbackParameterCheck(r,"SDK.JQuery.createRecord requires the errorCallback is a function.");var u=window.JSON.stringify(n);$.ajax({type:"POST",contentType:"application/json; charset=utf-8",datatype:"json",url:this._ODataPath()+t+"Set",data:u,beforeSend:function(n){n.setRequestHeader("Accept","application/json")},success:function(n){i(n.d)},error:function(n){r(SDK.JQuery._errorHandler(n))}})},retrieveRecord:function(n,t,i,r,u,f){var e,o;this._stringParameterCheck(n,"SDK.JQuery.retrieveRecord requires the id parameter is a string.");this._stringParameterCheck(t,"SDK.JQuery.retrieveRecord requires the type parameter is a string.");i!=null&&this._stringParameterCheck(i,"SDK.JQuery.retrieveRecord requires the select parameter is a string.");r!=null&&this._stringParameterCheck(r,"SDK.JQuery.retrieveRecord requires the expand parameter is a string.");this._callbackParameterCheck(u,"SDK.JQuery.retrieveRecord requires the successCallback parameter is a function.");this._callbackParameterCheck(f,"SDK.JQuery.retrieveRecord requires the errorCallback parameter is a function.");e="";(i!=null||r!=null)&&(e="?",i!=null&&(o="$select="+i,r!=null&&(o=o+","+r),e=e+o),r!=null&&(e=e+"&$expand="+r));$.ajax({type:"GET",contentType:"application/json; charset=utf-8",datatype:"json",url:this._ODataPath()+t+"Set(guid'"+n+"')"+e,beforeSend:function(n){n.setRequestHeader("Accept","application/json")},success:function(n,t,i){u(JSON.parse(i.responseText,SDK.JQuery._dateReviver).d)},error:function(n){f(SDK.JQuery._errorHandler(n))}})},updateRecord:function(n,t,i,r,u){this._stringParameterCheck(n,"SDK.JQuery.updateRecord requires the id parameter.");this._parameterCheck(t,"SDK.JQuery.updateRecord requires the object parameter.");this._stringParameterCheck(i,"SDK.JQuery.updateRecord requires the type parameter.");this._callbackParameterCheck(r,"SDK.JQuery.updateRecord requires the successCallback is a function.");this._callbackParameterCheck(u,"SDK.JQuery.updateRecord requires the errorCallback is a function.");var f=window.JSON.stringify(t);$.ajax({type:"POST",contentType:"application/json; charset=utf-8",datatype:"json",data:f,url:this._ODataPath()+i+"Set(guid'"+n+"')",beforeSend:function(n){n.setRequestHeader("Accept","application/json");n.setRequestHeader("X-HTTP-Method","MERGE")},success:function(){r()},error:function(n){u(SDK.JQuery._errorHandler(n))}})},deleteRecord:function(n,t,i,r){this._stringParameterCheck(n,"SDK.JQuery.deleteRecord requires the id parameter.");this._stringParameterCheck(t,"SDK.JQuery.deleteRecord requires the type parameter.");this._callbackParameterCheck(i,"SDK.JQuery.deleteRecord requires the successCallback is a function.");this._callbackParameterCheck(r,"SDK.JQuery.deleteRecord requires the errorCallback is a function.");$.ajax({type:"POST",contentType:"application/json; charset=utf-8",datatype:"json",url:this._ODataPath()+t+"Set(guid'"+n+"')",beforeSend:function(n){n.setRequestHeader("Accept","application/json");n.setRequestHeader("X-HTTP-Method","DELETE")},success:function(){i()},error:function(n){r(SDK.JQuery._errorHandler(n))}})},retrieveMultipleRecords:function(n,t,i,r,u){this._stringParameterCheck(n,"SDK.JQuery.retrieveMultipleRecords requires the type parameter is a string.");t!=null&&this._stringParameterCheck(t,"SDK.JQuery.retrieveMultipleRecords requires the options parameter is a string.");this._callbackParameterCheck(i,"SDK.JQuery.retrieveMultipleRecords requires the successCallback parameter is a function.");this._callbackParameterCheck(r,"SDK.JQuery.retrieveMultipleRecords requires the errorCallback parameter is a function.");this._callbackParameterCheck(u,"SDK.JQuery.retrieveMultipleRecords requires the OnComplete parameter is a function.");var f;t!=null&&(f=t.charAt(0)!="?"?"?"+t:t);$.ajax({type:"GET",contentType:"application/json; charset=utf-8",datatype:"json",url:this._ODataPath()+n+"Set"+f,beforeSend:function(n){n.setRequestHeader("Accept","application/json")},success:function(t,f,e){if(t&&t.d&&t.d.results)if(i(JSON.parse(e.responseText,SDK.JQuery._dateReviver).d.results),t.d.__next!=null){var o=t.d.__next.substring((SDK.JQuery._ODataPath()+n+"Set").length);SDK.JQuery.retrieveMultipleRecords(n,o,i,r,u)}else u()},error:function(n){r(SDK.JQuery._errorHandler(n))}})},getRedordsUrl:function(n){return this._stringParameterCheck(n,"SDK.JQuery.retrieveMultipleRecords requires the type parameter is a string."),this._ODataPath()+n+"Set"},getCrmSolutionUrl:function(){return this._getClientUrl()},__namespace:!0};SDK.Assign={_context:function(){if(typeof GetGlobalContext!="undefined")return GetGlobalContext();if(Xrm&&Xrm.Utility&&typeof Xrm.Utility.getGlobalContext!="undefined")return Xrm.Utility.getGlobalContext();if(typeof Xrm!="undefined")return Xrm.Page.context;throw new Error("Context is not available.");},_getClientUrl:function(){var n=this._context().getClientUrl();return n+"/XRMServices/2011/Organization.svc/web"},assignRequest:function(n,t,i,r,u){var f,e;this._parameterCheck(n,"GUID","The SDK.Assign.assignRequest method Assignee parameter must be a string Representing a GUID value.");this._parameterCheck(t,"GUID","The SDK.Assign.assignRequest method Target parameter must be a string Representing a GUID value.");this._parameterCheck(i,"String","The SDK.Assign.assignRequest method Type parameter must be a string value.");i=i.toLowerCase();r!=null&&this._parameterCheck(r,"Function","The SDK.Assign.assignRequest method successCallback parameter must be a function.");this._parameterCheck(u,"Function","The SDK.Assign.assignRequest method errorCallback parameter must be a function.");f=[];f.push('<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">');f.push("<s:Body>");f.push('<Execute xmlns="http://schemas.microsoft.com/xrm/2011/Contracts/Services"');f.push(' xmlns:i="http://www.w3.org/2001/XMLSchema-instance">');f.push('<request i:type="b:AssignRequest"');f.push(' xmlns:a="http://schemas.microsoft.com/xrm/2011/Contracts"');f.push(' xmlns:b="http://schemas.microsoft.com/crm/2011/Contracts">');f.push('<a:Parameters xmlns:c="http://schemas.datacontract.org/2004/07/System.Collections.Generic">');f.push("<a:KeyValuePairOfstringanyType>");f.push("<c:key>Target<\/c:key>");f.push('<c:value i:type="a:EntityReference">');f.push("<a:Id>"+this._xmlEncode(t)+"<\/a:Id>");f.push("<a:LogicalName>"+this._xmlEncode(i)+"<\/a:LogicalName>");f.push('<a:Name i:nil="true" />');f.push("<\/c:value>");f.push("<\/a:KeyValuePairOfstringanyType>");f.push("<a:KeyValuePairOfstringanyType>");f.push("<c:key>Assignee<\/c:key>");f.push('<c:value i:type="a:EntityReference">');f.push("<a:Id>"+this._xmlEncode(n)+"<\/a:Id>");f.push("<a:LogicalName>systemuser<\/a:LogicalName>");f.push('<a:Name i:nil="true" />');f.push("<\/c:value>");f.push("<\/a:KeyValuePairOfstringanyType>");f.push("<\/a:Parameters>");f.push('<a:RequestId i:nil="true" />');f.push("<a:RequestName>Assign<\/a:RequestName>");f.push("<\/request>");f.push("<\/Execute>");f.push("<\/s:Body>");f.push("<\/s:Envelope>");e=new XMLHttpRequest;e.open("POST",SDK.Assign._getClientUrl(),!0);e.setRequestHeader("Accept","application/xml, text/xml, */*");e.setRequestHeader("Content-Type","text/xml; charset=utf-8");e.setRequestHeader("SOAPAction","http://schemas.microsoft.com/xrm/2011/Contracts/Services/IOrganizationService/Execute");e.onreadystatechange=function(){SDK.Assign.assignResponse(e,r,u)};e.send(f.join(""))},assignResponse:function(n,t,i){n.readyState==4&&(n.onreadystatechange=null,n.status==200?t!=null&&t():i(SDK.Assign._getError(n.responseXML)))},_getError:function(n){var e="Unknown Error (Unable to parse the fault)",u,t,i,r,f;if(typeof n=="object")try{for(u=n.firstChild.firstChild,t=0;t<u.childNodes.length;t++)if(i=u.childNodes[t],"s:Fault"==i.nodeName){for(r=0;r<i.childNodes.length;r++)if(f=i.childNodes[r],"faultstring"==f.nodeName){e=f.textContent;break}break}}catch(o){}return new Error(e)},_xmlEncode:function(n){var t,i="",r;if(n==null)return null;if(n=="")return"";for(r=0;r<n.length;r++)t=n.charCodeAt(r),i=t>96&&t<123||t>64&&t<91||t==32||t>47&&t<58||t==46||t==44||t==45||t==95?i+String.fromCharCode(t):i+"&#"+t+";";return i},_parameterCheck:function(n,t,i){var r,u;switch(t){case"String":if(typeof n!="string")throw new Error(i);break;case"Function":if(typeof n!="function")throw new Error(i);break;case"EntityFilters":r=!1;for(x in this.EntityFilters)if(this.EntityFilters[x]==n){r=!0;break}if(!r)throw new Error(i);break;case"Boolean":if(typeof n!="boolean")throw new Error(i);break;case"GUID":if(u=new RegExp("[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}"),!(typeof n=="string"&&u.test(n)))throw new Error(i);break;default:throw new Error("An invalid type parameter value was passed to the SDK.MetaData._parameterCheck function.");}}};